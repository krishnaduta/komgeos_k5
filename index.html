<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>WebGIS Perubahan Tutupan Lahan IKN 2022-2024</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />

  <!-- Mapbox GL JS -->
  <link href="mapbox-gl.css" rel="stylesheet" />
  <script src="mapbox-gl.js"></script>
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }

    .menu {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      font-family: sans-serif;
      z-index: 2;
    }
    select, input[type="checkbox"] {
      width: 100%;
      margin-bottom: 8px;
    }
  </style>
</head>
<body>
<div id="map"></div>

<div class="menu">
  <h4>Layer Control</h4>
  <input type="checkbox" id="layer1" checked><label for="layer1"> Klasifikasi 2022</label><br>
  <input type="checkbox" id="layer2" checked><label for="layer2"> Klasifikasi 2024</label><br>
  <input type="checkbox" id="layer3" checked><label for="layer3"> Citra 2024</label><br>
  <input type="checkbox" id="layer4" checked><label for="layer4"> Citra 2022</label><br><br>

  <h4>Move Layer to Top</h4>
  <select id="layer-order">
    <option value="klasifikasi2022">Klasifikasi 2022</option>
    <option value="klasifikasi2024">Klasifikasi 2024</option>
    <option value="citra2024">Citra 2024</option>
    <option value="citra2022">Citra 2022</option>
  </select>
</div>

<script>
  mapboxgl.accessToken = 'pk.eyJ1Ijoia3Jpc2huYWR1dGEzMCIsImEiOiJjbWExNHY5NGwxcWxlMmpzN202dzkzd3JiIn0.NscHDoB1xCSVbmCnkDvfzA';

  const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v10',
    center: [116.75, -0.85],
    zoom: 9
  });

  map.on('load', function() {
    map.addSource('citra2022', { type: 'raster', url: 'mapbox://krishnaduta30.71l9z45x', tileSize: 256 });
    map.addLayer({ id: 'citra2022', type: 'raster', source: 'citra2022', paint: { 'raster-opacity': 1 } });

    map.addSource('citra2024', { type: 'raster', url: 'mapbox://krishnaduta30.1nm8az0p', tileSize: 256 });
    map.addLayer({ id: 'citra2024', type: 'raster', source: 'citra2024', paint: { 'raster-opacity': 1 } });

    map.addSource('klasifikasi2022', { type: 'raster', url: 'mapbox://krishnaduta30.akeeywuh', tileSize: 256 });
    map.addLayer({ id: 'klasifikasi2022', type: 'raster', source: 'klasifikasi2022', paint: { 'raster-opacity': 1 } });

    map.addSource('klasifikasi2024', { type: 'raster', url: 'mapbox://krishnaduta30.36lm9tv6', tileSize: 256 });
    map.addLayer({ id: 'klasifikasi2024', type: 'raster', source: 'klasifikasi2024', paint: { 'raster-opacity': 1 } });

    document.getElementById('layer1').addEventListener('change', function(e) {
      map.setLayoutProperty('klasifikasi2022', 'visibility', e.target.checked ? 'visible' : 'none');
    });
    document.getElementById('layer2').addEventListener('change', function(e) {
      map.setLayoutProperty('klasifikasi2024', 'visibility', e.target.checked ? 'visible' : 'none');
    });
    document.getElementById('layer3').addEventListener('change', function(e) {
      map.setLayoutProperty('citra2024', 'visibility', e.target.checked ? 'visible' : 'none');
    });
    document.getElementById('layer4').addEventListener('change', function(e) {
      map.setLayoutProperty('citra2022', 'visibility', e.target.checked ? 'visible' : 'none');
    });

    document.getElementById('layer-order').addEventListener('change', function(e) {
      const selectedLayer = e.target.value;
      map.moveLayer(selectedLayer);
    });
  });
</script>

</body>
</html>
